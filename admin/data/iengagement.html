<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Alumni Engagement ‚Äî Admin</title>
    <link rel="stylesheet" href="../../style.css">
    <link rel="stylesheet" href="../adminstyle.css">
    <script src="/logo-fallback.js" defer></script>
    <script src="/user-menu.js" defer></script>
    <style>
        /* small page-specific tweaks kept minimal; main styles live in adminstyle.css */
    </style>
</head>

<body>
    <header class="admin-header">
        <div class="header-left">
            <div class="logo-circle small"><img src="/logo/blue-orange-circle-logo.jpg" class="nav-logo" alt="logo" onerror="this.onerror=null;this.src='/logo/Blue%20%26%20Orange%20Circle%20Illustrative%20Education%20Logo.jpg'"></div>
        </div>
        <div class="header-center">NEXT STEP</div>
        <div class="header-right"><button class="user-icon">üë§</button></div>
    </header>

    <div class="admin-layout">
        <aside class="admin-sidebar">
            <nav>
                <ul>
                    <li class="active"><span class="home-ico">üè†</span> Dashboard</li>
                </ul>
            </nav>
            <div class="sidebar-footer"><a href="#">About</a><a href="#">Contact Us</a></div>
        </aside>

        <main class="admin-main">
            <a class="back-link" href="../index.html">‚Üê</a>
            <h1>Alumni Engagement</h1>

            <div class="page-card iengagement-card">
                <div class="eng-row">
                    <h3 class="eng-question">Do you like to join alumni career events?</h3>
                    <div class="eng-chart" data-key="careerEvents">
                        <div class="eng-bars">
                            <div class="eng-row-item">
                                <div class="eng-label">Yes</div>
                                <div class="eng-fill eng-yes" role="img" aria-label="Yes count" style="--w:0%"><span class="fill-inner"></span></div>
                                <div class="eng-value count-yes"></div>
                            </div>
                            <div class="eng-row-item">
                                <div class="eng-label">No</div>
                                <div class="eng-fill eng-no" role="img" aria-label="No count" style="--w:0%"><span class="fill-inner"></span></div>
                                <div class="eng-value count-no"></div>
                            </div>
                        </div>
                        <div class="eng-axis" aria-hidden="true">
                            <div class="ticks">
                                <span>0</span><span>300</span><span>600</span><span>900</span><span>1200</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="eng-row">
                    <h3 class="eng-question">Are you willing to mentor current students?</h3>
                    <div class="eng-chart" data-key="mentorStudents">
                        <div class="eng-bars">
                            <div class="eng-row-item">
                                <div class="eng-label">Yes</div>
                                <div class="eng-fill eng-yes" role="img" aria-label="Yes count" style="--w:0%"><span class="fill-inner"></span></div>
                                <div class="eng-value count-yes"></div>
                            </div>
                            <div class="eng-row-item">
                                <div class="eng-label">No</div>
                                <div class="eng-fill eng-no" role="img" aria-label="No count" style="--w:0%"><span class="fill-inner"></span></div>
                                <div class="eng-value count-no"></div>
                            </div>
                        </div>
                        <div class="eng-axis" aria-hidden="true">
                            <div class="ticks">
                                <span>0</span><span>300</span><span>600</span><span>900</span><span>1200</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="eng-row">
                    <h3 class="eng-question">I want to be featured in alumni success stories</h3>
                    <div class="eng-chart" data-key="featureStories">
                        <div class="eng-bars">
                            <div class="eng-row-item">
                                <div class="eng-label">Yes</div>
                                <div class="eng-fill eng-yes" role="img" aria-label="Yes count" style="--w:0%"><span class="fill-inner"></span></div>
                                <div class="eng-value count-yes"></div>
                            </div>
                            <div class="eng-row-item">
                                <div class="eng-label">No</div>
                                <div class="eng-fill eng-no" role="img" aria-label="No count" style="--w:0%"><span class="fill-inner"></span></div>
                                <div class="eng-value count-no"></div>
                            </div>
                        </div>
                        <div class="eng-axis" aria-hidden="true">
                            <div class="ticks">
                                <span>0</span><span>300</span><span>600</span><span>900</span><span>1200</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="no-data" style="display:none">No engagement data available.</div>
            </div>

        </main>
    </div>

    <footer class="admin-footer">
        <div class="admin-footer-inner">¬© Next Step</div>
    </footer>

    <script>
        // Fetch engagement data and render bars. Designed to work with empty data.
        (function() {
            const file = './iengagement.json';
            const maxAxis = 1300; // default axis upper bound
            fetch(file).then(r => r.ok ? r.json() : null).then(data => {
                if (!data || !data.summary) {
                    document.querySelector('.iengagement-card .no-data').style.display = 'block';
                    return;
                }
                const summary = data.summary;
                const rows = document.querySelectorAll('.eng-chart');
                let any = false;
                rows.forEach(chart => {
                    const key = chart.dataset.key;
                    const yes = (summary[key] && typeof summary[key].yes === 'number') ? summary[key].yes : 0;
                    const no = (summary[key] && typeof summary[key].no === 'number') ? summary[key].no : 0;
                    const yesPct = Math.round((yes / maxAxis) * 100);
                    const noPct = Math.round((no / maxAxis) * 100);
                    // target the inner fill element so the width CSS variable controls the visible bar
                    const elYesFill = chart.querySelector('.eng-yes .fill-inner');
                    const elNoFill = chart.querySelector('.eng-no .fill-inner');
                    if (elYesFill) elYesFill.style.setProperty('--w', yesPct + '%');
                    if (elNoFill) elNoFill.style.setProperty('--w', noPct + '%');
                    // write numeric counts into the value slots (show 0 when count is zero)
                    const cYes = chart.querySelector('.count-yes');
                    const cNo = chart.querySelector('.count-no');
                    if (cYes) cYes.textContent = String(yes);
                    if (cNo) cNo.textContent = String(no);
                    if (yes || no) any = true;
                });
                if (!any) document.querySelector('.iengagement-card .no-data').style.display = 'block';
            }).catch(() => {
                document.querySelector('.iengagement-card .no-data').style.display = 'block';
            });
        })();
    </script>
</body>

</html>